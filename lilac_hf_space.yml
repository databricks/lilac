datasets:
  - namespace: lilac
    name: Capybara
    source:
      dataset_name: LDJnr/Capybara
      source_name: huggingface
    settings:
      ui:
        media_paths:
          - - conversation
            - '*'
            - input
          - - conversation
            - '*'
            - output
        markdown_paths: []
      tags: [dataset]
    embeddings:
      - embedding: gte-small
        path:
          - conversation
          - '*'
          - input
        use_garden: true
      - embedding: gte-small
        path:
          - conversation
          - '*'
          - output
        use_garden: true

  - namespace: lilac
    name: glaive
    source:
      dataset_name: glaiveai/glaive-code-assistant
      source_name: huggingface
    settings:
      tags: [machine-learning]
      ui:
        view_type: 'single_item'
      ui:
        media_paths:
          - question
          - answer
          - - answer_formatted
            - answer
        markdown_paths: []
    embeddings:
      - embedding: gte-small
        path:
          - question
      - embedding: gte-small
        path:
          - answer

  - name: open-asssistant-conversations
    namespace: lilac
    settings:
      tags: [machine-learning]
      ui:
        media_paths:
          - text
      preferred_embedding: 'gte-small'
    source:
      source_name: huggingface
      dataset_name: OpenAssistant/oasst1
    embeddings:
      - embedding: gte-small
        path:
          - text

  - name: databricks-dolly-15k-curated-en
    namespace: lilac
    settings:
      tags: [machine-learning]
      ui:
        media_paths:
          - original-instruction
          - original-context
          - original-response
          - - new-instruction
            - value
            - '*'
          - - new-context
            - value
            - '*'
          - - new-response
            - value
            - '*'
    source:
      dataset_name: argilla/databricks-dolly-15k-curated-en
      source_name: huggingface
    embeddings:
      - embedding: gte-small
        path:
          - original-instruction
      - embedding: gte-small
        path:
          - original-context
      - embedding: gte-small
        path:
          - original-response

  - name: 'OpenOrca-100k'
    namespace: lilac
    settings:
      tags: [machine-learning]
      ui:
        media_paths:
          - question
          - response
      preferred_embedding: 'gte-small'
    source:
      source_name: huggingface
      dataset_name: Open-Orca/OpenOrca
      sample_size: 100000
    embeddings:
      - embedding: gte-small
        path:
          - question
      - embedding: gte-small
        path:
          - response

  - namespace: lilac
    name: dolphin
    source:
      dataset_name: cognitivecomputations/dolphin
      config_name: flan1m-alpaca-uncensored
      source_name: huggingface
    settings:
      ui:
        media_paths:
          - instruction
          - input
          - output
          - - input__cluster
            - text
        markdown_paths: []

signals:
  - signal_name: pii
  - signal_name: text_statistics
  - signal_name: lang_detection
  - signal_name: concept_score
    namespace: lilac
    concept_name: profanity
    embedding: gte-small

concept_model_cache_embeddings:
  - gte-small
  - gte-base
  - sbert
  - openai
  - cohere
  # PALM is currently timing-out.
  # - palm

clusters:
  - dataset_namespace: lilac
    dataset_name: Capybara
    input_path:
      - conversation
      - '*'
      - input
    use_garden: true
  - dataset_namespace: lilac
    dataset_name: glaive
    input_path:
      - question
    use_garden: true
  - dataset_namespace: lilac
    dataset_name: open-asssistant-conversations
    input_path:
      - text
    use_garden: true
  - dataset_namespace: lilac
    dataset_name: databricks-dolly-15k-curated-en
    input_path:
      - original-instruction
    use_garden: true
  - dataset_namespace: lilac
    dataset_name: OpenOrca-100k
    input_path:
      - question
    use_garden: true
  - dataset_namespace: lilac
    dataset_name: dolphin
    input_path:
      - input
    use_garden: true
